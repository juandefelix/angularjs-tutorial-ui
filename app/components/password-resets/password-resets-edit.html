<div ng-show="ctrl.showForm">
  <h1>Reset password</h1>

  <div class="row">
    <div class="col-md-6 col-md-offset-3">
      <form name="reset" at-submit="ctrl.updatePassword()" novalidate>
        <div class="form-group" ng-class="{'has-error': at.reset.needsAttention(reset.password)}">
          <label for="password" class="control-label">Password</label>
          <input id="password" name="password" class="form-control"
                 type="password" placeholder="New password" required
                 ng-model="ctrl.password" ng-minlength="6" ng-maxlength="255"
                 ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }">
        </div>

        <div class="help-error" role="alert"
             ng-messages="reset.password.$error" ng-if="at.reset.needsAttention(reset.password)">
          <div ng-message="required">Password is required</div>
          <div ng-message="minlength">Password should be at least 6 characters long</div>
          <div ng-message="maxlength">Password can't be longer than 255 characters</div>
        </div>

        <div class="form-group" ng-class="{'has-error': at.reset.needsAttention(reset.password_confirmation)}">
          <label for="password_confirmation" class="control-label">Confirmation</label>
          <input id="password_confirmation" name="password_confirmation" class="form-control"
                 type="password" placeholder="Confirm password"
                 ng-model="ctrl.confirmation" at-confirm-password="ctrl.password"
                 ng-model-options="{ updateOn: 'default blur', debounce: { default: 500, blur: 0 } }">
        </div>

        <div class="help-error" role="alert"
             ng-messages="reset.password_confirmation.$error"
             ng-if="at.reset.needsAttention(reset.password_confirmation)">
          <div ng-message="atConfirmPassword">Passwords have to match</div>
        </div>

        <input type="submit" class="btn btn-primary" value="Update password">
      </form>
    </div>
  </div>
</div>
